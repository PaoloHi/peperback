@using Microsoft.AspNetCore.Identity;
@model BrokersModelConsola
@inject SignInManager<IdentityUser> SignInManager;

@{
    ViewData["Title"] = "Rummet / Consola brokers";
    Layout = "_NavUsuarios";
}


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Proyecto_administracion</title>

    <link rel="icon" type="image/png" sizes="16x16" href="~/img/imagen-logo/logo_oficial.png">
    <link rel="stylesheet" href="~/css/styleGeneral.css" />
    <link rel="stylesheet" href="~/css/estilosGenerales.css" />
    <link rel="stylesheet" href="~/css/style_tablero_propiedades.css">
    <link rel="stylesheet" href="~/css/style_tablero_brokers.css">

    <script src="https://kit.fontawesome.com/e43b4d35fb.js" crossorigin="anonymous"></script>
</head>

<!--animacion-->
<ul class="circles">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul>


<!--MAIN CONTAINER ///////////////////////////////////////////////////////////////////////////////////////////////-->
<h4 class="ms-4 tituloVista">Brokers</h4>
<div class="container-fluid contenedorGeneralBlanco mt-3 " style="margin: 0px 2rem; width: -webkit-fill-available;">

    <!--indicadores y barra de acciones -->
    <div class="container-fluid indicadores_Container mt-3" style="width:fit-content;">
        <div class="row tab margin-tablinks mx-auto">

            @{
                var BA = 0;
                var BI = 0;
                var BC = 0;
                var BB = 0;

                foreach (var ContB in Model.ConteoBrokers)
                {
                    if (ContB.EstatusBroker == "Afiliado")
                    {
                        BA = ContB.Conteo;

                    }
                    if (ContB.EstatusBroker == "Suspendido")
                    {

                        BI = ContB.Conteo;
                    }
                    if (ContB.EstatusBroker == "Cancelado")
                    {
                        BC = ContB.Conteo;
                    }
                    if (ContB.EstatusBroker == "Bloqueado")
                    {
                        BB = ContB.Conteo;

                    }

                }

            }
            <!--Broker Afiliados-->
            <div class="col p-0">
                <button id="Afiliados" type="button" class="changeCard border-0 d-flex tablinks2" onclick="vertablas(event, 'Tabla2')" id="defaultOpen2">
                    <!--verAfiliados-->
                    <div class="caja-a-b mb-2 mb-xl-0  ">
                        <div class="card-main col-12 d-flex align-items-center">
                            <div class="col-6 mt-2 d-flex justify-content-center">


                                <div class="d-flex mt-1">
                                    <i class="fa-solid fa-user-check fa-2x" style="color: #55a630; font-size: 37px;"></i>
                                </div>
                            </div>
                            <div class="col-6 d-flex justify-content-center">
                                <div class="text-cards d-flex mt-2 indicator-active" style="background-color: #55a630">
                                    <h6 class="mx-auto text-white my-auto size-number-indicator">@BA</h6>
                                </div>
                            </div>



                        </div>
                        <div class="">
                            <div class=" d-flex justify-content-center">
                                <p class="size-letter-cards-first ms-2 mt-2">Afiliados</p>
                            </div>
                        </div>
                    </div>
                </button>
            </div>

            <!------------------------>
            <!--Broker inactivos-->
            <div class="col p-0">
                <button id="Inactivos" type="button" class="changeCard border-0 d-flex tablinks2" onclick="vertablas(event, 'Tablapubli')">
                    <div class="caja-a-b mb-xl-0 ">
                        <div class="card-main col-12 d-flex align-items-center">
                            <div class="col-6 mt-2 justify-content-center d-flex">


                                <div class="d-flex mt-1">
                                    <i class="fa-solid fa-user-large " style="color:rgb(129, 129, 129); font-size: 37px;"></i>
                                </div>
                            </div>
                            <div class="col-6 d-flex justify-content-center">
                                <div class="text-cards d-flex mt-2  indicator-inactive">
                                    <h6 class="mx-auto text-white my-auto size-number-indicator ">@BI</h6>
                                </div>
                            </div>
                        </div>
                        <div class=" ">
                            <div class=" d-flex justify-content-center">
                                <p class="size-letter-cards-first ms-2 mt-1">Inactivos</p>
                            </div>
                        </div>
                    </div>
                </button>
            </div>

            <!------------------------>
            <!--Broker cancelado-->

            <div class="col p-0">
                <button id="Cancelados" type="button" class="changeCard border-0 d-flex tablinks2" onclick="vertablas(event, 'TablaprocesoEntrega')">
                    <div class="caja-a-b mx-auto mb-2 mb-xl-0">
                        <div class="card-main col-12 d-flex align-items-center">
                            <div class="col-6 mt-1 justify-content-center d-flex ">


                                <div class="d-flex mt-1">
                                    <i class="fa-solid fa-user-xmark fa-2x" style="color: rgb(255, 0, 0); font-size: 37px;"></i>
                                </div>
                            </div>
                            <div class="d-flex justify-content-center col-6">
                                <div class="text-cards d-flex mt-2 indicator-cancel">
                                    <h6 class="mx-auto text-white my-auto size-number-indicator">@BC</h6>
                                </div>
                            </div>



                        </div>
                        <div class="col">
                            <div class=" d-flex justify-content-center">
                                <p class="size-letter-cards-first mt-1">Cancelados</p>
                            </div>
                        </div>
                    </div>
                </button>
            </div>

            <!------------------------>
            <!--Broker bloqueado-->
            <div class="col p-0">
                <button id="Bloqueados" type="button" class="changeCard border-0 d-flex tablinks2" onclick="vertablas(event, 'Tabla6')">
                    <div class="caja-a-b mx-auto mb-2 mb-xl-0">
                        <div class="card-main col-12 d-flex align-items-center">
                            <div class="col-6 mt-3 justify-content-center d-flex">


                                <div class="d-flex  ">
                                    <i class="fa-solid fa-user-slash fa-2x" style="font-size: 37px"></i>
                                </div>
                            </div>
                            <div class="d-flex justify-content-center col-6">
                                <div class="text-cards d-flex mt-2 indicator-block">
                                    <h6 class="mx-auto text-white my-auto size-number-indicator">@BB</h6>
                                </div>
                            </div>



                        </div>
                        <div class="col">
                            <div class=" d-flex d-block justify-content-center">
                                <p class="size-letter-cards-first ms-2 mt-1">Bloqueados</p>
                            </div>
                        </div>
                    </div>
                </button>
            </div>


            <!------------------------>

        </div>

        <div class="container-fluid px-0 mt-3 mx-auto row row-cols-3 mt-1 responsiveExtraSmall">

            <!--boton de nueva propiedad-->
            <form class="d-flex col-lg-3 ">
                <button type="submit" class="row row-cols-2 d-inline-flex btnExperimento p-0 mresponsive" asp-controller="Brokers" asp-action="NuevoBroker">
                    <div class="col-9 suContainGrande text-black" style="font-size: 12.3px;">
                        Nuevo broker
                    </div>
                    <div class="col-3 subContain">
                        <i class="fa-solid fa-plus icono"></i>
                    </div>
                </button>
            </form>

            <div class="d-flex col-lg-7  row row-cols-2 mresponsiveInputSearch">
                <input class="inputs size-search " id="autoComplete" type="search" placeholder="Buscar" aria-label="Search">
            </div>


            <form id="excelTabla" class="d-flex col-lg-2 justify-content-end px-0 ms-3">
                <button id="tablaExcel" class="btn-s ms-1 botonExcel" data-toggle="tooltip" data-placement="bottom" title="Descargar datos a excel" asp-controller="Brokers" asp-action="ExportarListaBrokers">
                    <i class="fa-solid fa-file-excel"></i>
                </button>
            </form>

        </div>
    </div>

    <input id="default" value="Afiliados" class="d-none">
    <input id="controlador" value="Brokers" class="d-none" />
    @*

    <form class="container-fluid mt-3 mx-auto row row-cols-lg-2 row-cols-sm-1 mt-1 responsiveExtraSmall">

    <div class="d-flex mx-auto " style="    width: 84%;">
    <!--boton de nuevo broker-->
    <div class="d-flex col-3 col-lg-3 col-md-3 col-sm-3 col-12" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Añadir nuevo broker">
    <button class="row row-cols-2 d-inline-flex btnExperimento p-0" asp-controller="Brokers" asp-action="NuevoBroker">
    <div class="col-9 suContainGrande text-black" style="font-size: 12.3px;">
    Nuevo broker
    </div>
    <div class="col-3 subContain">
    <i class="fa-solid fa-plus icono"></i>
    </div>
    </button>
    </div>

    <div class="d-flex col-9 col-lg-9 col-md-9 col-sm-9 col-12 row row-cols-2 ">
    <div class="d-flex col-8">
    <input id="autoComplete" class=" inputs size-search w-100" type="search" placeholder="Buscar"
    aria-label="Search" style="font-size:0.8rem">
    </div>

    <div class="d-flex col-2">
    <button id="tablaExcel" asp-controller="Brokers" asp-action="ExportarListaBrokers" class="btn-s ms-1" data-toggle="tooltip" data-placement="bottom"
    title="Descargar datos a excel" onclick="exportTableToExcel('tablaExcel')">

    <i class="fa-solid  fa-file-excel"></i>
    </button>
    </div>
    </div>

    </div>


    </form>
    *@

    <!--tabla para afiliados-->
    <div class="px-0  tabcontent2 mb-3" id="Tabla2">
        <div class="container-fluid px-0 mx-auto row">
            <div class="col">

                <!--Botones de visualización para ver las tarjetas o la tabla-->
                <div class="tab rounded">
                    <button id="card" class="changeFormat tarjetaNoPublicadasDefault tablinks" onclick="openCity(event, 'Tarjetas')" id="defaultOpen" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tarjeta">
                        <svg class="size-icons-table" fill="none" stroke="currentColor"
                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2">
                            </path>
                        </svg>
                    </button>

                    <button id="table" class="changeFormat tablinks" onclick="openCity(event, 'Tabla')" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Vista tabla">
                        <i class="fa-solid fa-table mt-1" style="font-size:20px; color: rgb(71, 71, 71);"></i>
                    </button>
                </div>

                <!--Aqui termina los botones de visualización-->
                <!--Tarjetas de Afiliados -->
                <div id="Tarjetas" class="tabcontent">

                    <div class="container-fluid row px-0">
                        <div class="row row-cols-xxl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 responsiveExtraSmall" style="margin: 0px 11px;">
                            @{
                                var statusBroker = "Afiliado";
                                var colorStatusBroker = "";
                                if (statusBroker == "Afiliado")
                                {
                                    colorStatusBroker = "bg-status-afiliado";
                                }
                                else if (statusBroker == "Inactivo")
                                {
                                    colorStatusBroker = "bg-status-inactivo";
                                }
                                else if (statusBroker == "Cancelado")
                                {
                                    colorStatusBroker = "bg-status-cancelado";
                                }
                                else
                                {
                                    colorStatusBroker = "bg-status-bloqueado";
                                }
                            }
                            <!--Afiliado-->
                            @foreach (var aliado in Model.BrokersAL)
                            {
                                <div id="Brokers_@aliado.IDBroker" class="card Afiliados mt-2 col  mb-2 ">

                                    <div class="cardBroker h-auto mx-auto mb-2  fw-bold p-1">

                                        <div class="card-center-1  d-flex justify-content-end">


                                            <div class="etiquetadoBrokers  @colorStatusBroker  size-letter-card-t">
                                                <p class="txtEtiquetado mx-3 ">Afiliado</p>
                                            </div>

                                        </div>

                                        <div class=" col-12  d-flex mt-1  mx-auto color-letter-cards align-items-center row row-cols-1">
                                            <!--fila de la informacon prinipal de la tarjeta-->
                                            <div class="card-mainInfo row d-inline-flex mx-auto">

                                                <div class="col-3">


                                                    @{

                                                        bool userExists = Model.BrokerImgAL.Exists(u => u.IDBrokerImg == aliado.IDBroker);

                                                        if (userExists)
                                                        {
                                                            foreach (var imgB in Model.BrokerImgAL)
                                                            {
                                                                if (imgB.IDBrokerImg == aliado.IDBroker && @imgB.txtBase64 != null)
                                                                {
                                                                    <img src="@imgB.txtBase64" alt="" class="img-size-t d-flex mx-auto ">
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <img src="~/img/Imagenes-tab-brockers/profile.png" alt="" class="img-size-t d-flex mx-auto ">

                                                        }




                                                    }

                                                </div>
                                                <div class="col-9 text-cards ">
                                                    <div class="ms-3  color-icons-cards">
                                                        <h6 class=" text-orange NombreBrokerCard  longitudDePruebaBroker">
                                                            <i class="fa-solid fa-user me-2"></i>

                                                            @aliado.Nombre @aliado.ApellidoP
                                                        </h6>
                                                        <h6 class="subTextBrokerCard  ">
                                                            <i class="fa-solid fa-phone me-2"></i>@aliado.Telefono
                                                        </h6>
                                                        <h6 class="subTextBrokerCard longitudDePruebaBroker">
                                                            <i class="fa-solid fa-envelope me-2 "></i>
                                                            @aliado.Correo
                                                        </h6>

                                                    </div>
                                                </div>
                                            </div>
                                            <!--fila de los iconos-->
                                            <div class="row d-flex justify-content-end col-7 row row-cols-4 ms-auto mt-2 mb-2">
                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2 " asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@aliado.IDBroker"
                                                   data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye "></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <div class="d-flex flex-column col">
                                                        <div class="" mb-4 ms-3">
                                                            <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@aliado.Correo')">
                                                                <i class="fa-solid fa-key"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                }

                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" onclick="validateDataDelate(@aliado.IDBroker, 'Broker')"
                                                   data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </a>


                                            </div>
                                        </div>
                                    </div>
                                </div>

                            }
                            <!--FIN DEL AFILIADO-->
                        </div>
                        <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-4">
                            <ul class="pagination" id="paginacionAfiliadoscard">
                            </ul>
                        </nav>
                    </div>

                </div>

                <!--tabla de los Afiliados -->
                <div id="Tabla" class="tabcontent">
                    <div class="table-wrapper-scroll-y my-custom-scrollbar table-responsive mt-2 bg-light rounded table-bordered ">
                        <table class="table table-hover ">
                            <thead class="backgr-gray-head">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Asociado</th>
                                    <th scope="col" class="text-center">Teléfono</th>
                                    <th scope="col" class="text-center">Correo</th>
                                    <th scope="col">Estatus</th>
                                    <th scope="col">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>

                                <!--Back-End team: cuando hagan el ciclo por favor tomen en cuenta solamente la primmera columna de la tabla
                                    ya que hay se encuentran todos los cambios que he hecho-->
                                @foreach (var afiliado in Model.BrokersAL)
                                {
                                    <tr id="BrokersTabla_@afiliado.IDBroker" class=" table Afiliados tabla-hover">
                                        <th scope="row">@afiliado.BrokerID</th>
                                        <td> @afiliado.Nombre @afiliado.ApellidoP @afiliado.ApellidoM </td>
                                        <td> @afiliado.NAsociado  </td>
                                        <td class="text-center">@afiliado.Telefono</td>
                                        <td class="text-center">@afiliado.Correo</td>

                                        <td class="text-center">
                                            <!--esto hay que conectarlo solamente es de prueba-->
                                            <p class="bg-status-afiliado  etiquetadoTabla   text-white">Afiliado</p>
                                        </td>

                                        <td>
                                            <div class=" d-flex justify-content-evenly ">
                                                <a asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@afiliado.IDBroker" class="style-vermas2" data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye"></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@afiliado.Correo')">
                                                        <i class="fa-solid fa-key"></i>
                                                    </a>
                                                }
                                                <a class="style-vermas2" onclick="validateDataDelate(@afiliado.IDBroker, 'Broker')" data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can "></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                                <!-- <== o sea... esta -->


                            </tbody>
                        </table>
                    </div>
                    <!--FIN DEL AFILIADO-->
                    @* MODIFICADO POR JENNY *@
                    <nav aria-label="Page navigation example" class="d-flex justify-content-center mt-4">
                        <ul class="pagination" id="paginacionAfiliadostable">
                        </ul>
                    </nav>
                </div>

            </div>
        </div>
    </div>

    <!--tabla para inactivos-->
    <div class="px-0  tabcontent2 mb-3" id="Tablapubli">
        <div class="container-fluid px-0 mx-auto row">
            <div class="col ">

                <!--Botones de visualización para ver las tarjetas o la tabla-->
                <div class="tab rounded">
                    <button id="card" class="changeFormat Inactivos tablinks4" onclick="vercontenedor2(event, 'Tarjetaspubli')" id="defaultOpen4" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tarjeta">
                        <svg class="size-icons-table" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"></path>
                        </svg>
                    </button>

                    <button id="table" class=" changeFormat tablinks4" onclick="vercontenedor2(event, 'Tablapublicadas')" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tabla">
                        <i class="fa-solid fa-table mt-1" style="font-size:20px; color: rgb(71, 71, 71);"></i>
                    </button>

                </div>

                <!--tarjetas de brokers inactivos-->
                <div id="Tarjetaspubli" class="tabcontent4">

                    <div class="container-fluid row px-0">
                        <div class="row row-cols-xxl-4  row-cols-lg-3 row-cols-md-2 row-cols-sm-1 responsiveExtraSmall" style="margin: 0px 11px;">

                            @foreach (var inactivo in Model.BrokersIL)
                            {
                                <div id="Brokers_@inactivo.IDBroker" class="card Inactivos mt-2 col mb-2 ">

                                    <div class="cardBroker h-auto  mb-2  fw-bold p-1">

                                        <div class="card-center-1  d-flex justify-content-end">


                                            <div class="etiquetadoBrokers  bg-status-inactivo  size-letter-card-t">
                                                <p class="txtEtiquetado  mx-3">Inactivo</p>
                                            </div>

                                        </div>

                                        <div class=" col-12  d-flex mt-1  mx-auto color-letter-cards align-items-center row row-cols-1">
                                            <!--fila de la informacon prinipal de la tarjeta-->
                                            <div class="card-mainInfo row d-inline-flex mx-auto">

                                                <div class="col-3">


                                                    @{

                                                        bool userExists = Model.BrokerImgIL.Exists(u => u.IDBrokerImg == inactivo.IDBroker);

                                                        if (userExists)
                                                        {
                                                            foreach (var imgB in Model.BrokerImgIL)
                                                            {
                                                                if (imgB.IDBrokerImg == inactivo.IDBroker && @imgB.txtBase64 != null)
                                                                {
                                                                    <img src="@imgB.txtBase64" alt="" class="img-size-t d-flex mx-auto ">
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <img src="~/img/Imagenes-tab-brockers/profile.png" alt="" class="img-size-t d-flex mx-auto ">

                                                        }




                                                    }

                                                </div>
                                                <div class="col-9 text-cards ">
                                                    <div class="ms-3  color-icons-cards">
                                                        <h6 class=" text-orange NombreBrokerCard  longitudDePruebaBroker">
                                                            <i class="fa-solid fa-user me-2"></i>

                                                            @inactivo.Nombre @inactivo.ApellidoP
                                                        </h6>
                                                        <h6 class="subTextBrokerCard  ">
                                                            <i class="fa-solid fa-phone me-2"></i>@inactivo.Telefono
                                                        </h6>
                                                        <h6 class="subTextBrokerCard longitudDePruebaBroker">
                                                            <i class="fa-solid fa-envelope me-2"></i>@inactivo.Correo
                                                        </h6>

                                                    </div>
                                                </div>
                                            </div>
                                            <!--fila de los iconos-->
                                            <div class="row d-flex justify-content-end col-7 row row-cols-4 ms-auto mt-2 mb-2">
                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2 " asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@inactivo.IDBroker"
                                                   data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye "></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <div class="d-flex flex-column col">
                                                        <div class="" mb-4 ms-3">
                                                            <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@inactivo.Correo')">
                                                                <i class="fa-solid fa-key"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                }

                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" onclick="validateDataDelate(@inactivo.IDBroker, 'Broker')"
                                                   data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            }

                        </div>

                        <footer class="d-flex row justify-content-center">
                            <nav id="paginacionInactivoscard" aria-label="" class="mt-4 d-flex justify-content-center">

                            </nav>
                        </footer>

                    </div>



                </div>

                <!--tabla de brokers inactivos-->
                <div id="Tablapublicadas" class="tabcontent4 bg-light mt-3">

                    <div class="table-wrapper-scroll-y my-custom-scrollbar table-responsive mt-2 bg-light rounded table-bordered ">
                        <table class="table table-hover ">
                            <thead class="backgr-gray-head">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Asociado</th>
                                    <th scope="col" class="text-center">Teléfono</th>
                                    <th scope="col" class="text-center">Correo</th>

                                    <th scope="col">Estatus</th>
                                    <th scope="col">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>

                                <!--Back-End team: cuando hagan el ciclo por favor tomen en cuenta solamente la primmera columna de la tabla
                                    ya que hay se encuentran todos los cambios que he hecho-->
                                @foreach (var inactivo in Model.BrokersIL)
                                {
                                    <tr id="BrokersTabla_@inactivo.IDBroker" class="table Inactivos tabla-hover">
                                        <th scope="row">@inactivo.BrokerID</th>
                                        <td> @inactivo.Nombre @inactivo.ApellidoP @inactivo.ApellidoM </td>
                                        <td> @inactivo.NAsociado  </td>
                                        <td class="text-center">@inactivo.Telefono</td>
                                        <td class="text-center">@inactivo.Correo</td>

                                        <td class="text-center">
                                            <!--esto hay que conectarlo solamente es de prueba-->
                                            <p class="bg-status-inactivo  etiquetadoTabla   text-white">Inactivo</p>
                                        </td>

                                        <td>
                                            <div class=" d-flex justify-content-evenly ">
                                                <a asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@inactivo.IDBroker" class="style-vermas2" data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye"></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@inactivo.Correo')">
                                                        <i class="fa-solid fa-key"></i>
                                                    </a>
                                                }

                                                <a class="style-vermas2" onclick="validateDataDelate(@inactivo.IDBroker, 'Broker')" data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can "></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>

                    </div>

                    <footer class="d-flex row justify-content-center">
                        <nav id="paginacionInactivostable" aria-label="" class="mt-4 d-flex justify-content-center ">

                        </nav>
                    </footer>

                </div>
            </div>
        </div>
    </div>

    <!--tabla para cancelados-->
    <div class="px-0  tabcontent2 mb-3" id="TablaprocesoEntrega">
        <div class="container-fluid px-0 mx-auto row">
            <div class="col ">

                <!--Botones de visualización para ver las tarjetas o la tabla-->
                <div class="tab  rounded mb-1">
                    <button id="card" class="changeFormat tarjetaPublicadasDefault tablinks5" onclick="vercontenedor3(event, 'Tarjetasproceso')" id="defaultOpen5" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tarjeta">
                        <svg class="size-icons-table" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"></path></svg>
                    </button>
                    <button id="table" class="changeFormat tablinks5" onclick="vercontenedor3(event, 'Tablaproceso')" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tabla">
                        <i class="fa-solid fa-table mt-1" style="font-size:20px; color: rgb(71, 71, 71);"></i>
                    </button>
                </div>

                <div id="Tarjetasproceso" class="tabcontent5 ">
                    <div class="container-fluid  row px-0">
                        <div class="row row-cols-xxl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 responsiveExtraSmall" style=" margin: 0px 11px;">

                            @foreach (var cancelado in Model.BrokersCL)
                            {
                                <div id="Brokers_@cancelado.IDBroker" class=" card Cancelados mt-2 col  mb-2 ">

                                    <div class="cardBroker h-auto mx-auto mb-2  fw-bold p-1">

                                        <div class="card-center-1  d-flex justify-content-end">


                                            <div class="etiquetadoBrokers bg-status-cancelado  size-letter-card-t">
                                                <p class="txtEtiquetado  mx-3">Cancelado</p>
                                            </div>

                                        </div>

                                        <div class=" col-12  d-flex mt-1  mx-auto color-letter-cards align-items-center row row-cols-1">
                                            <!--fila de la informacon prinipal de la tarjeta-->
                                            <div class="card-mainInfo row d-inline-flex mx-auto">

                                                <div class="col-3">


                                                    @{

                                                        bool userExists = Model.BrokerImgCL.Exists(u => u.IDBrokerImg == cancelado.IDBroker);

                                                        if (userExists)
                                                        {
                                                            foreach (var imgB in Model.BrokerImgCL)
                                                            {
                                                                if (imgB.IDBrokerImg == cancelado.IDBroker && @imgB.txtBase64 != null)
                                                                {
                                                                    <img src="@imgB.txtBase64" alt="" class="img-size-t d-flex mx-auto ">
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <img src="~/img/Imagenes-tab-brockers/profile.png" alt="" class="img-size-t d-flex mx-auto ">

                                                        }




                                                    }

                                                </div>
                                                <div class="col-9 text-cards ">
                                                    <div class="ms-3  color-icons-cards">
                                                        <h6 class=" text-orange NombreBrokerCard  longitudDePruebaBroker">
                                                            <i class="fa-solid fa-user me-2"></i>

                                                            @cancelado.Nombre @cancelado.ApellidoP
                                                        </h6>
                                                        <h6 class="subTextBrokerCard  ">
                                                            <i class="fa-solid fa-phone me-2"></i>@cancelado.Telefono
                                                        </h6>
                                                        <h6 class="subTextBrokerCard longitudDePruebaBroker">
                                                            <i class="fa-solid fa-envelope me-2"></i>@cancelado.Correo
                                                        </h6>

                                                    </div>
                                                </div>
                                            </div>
                                            <!--fila de los iconos-->
                                            <div class="row d-flex justify-content-end col-7 row row-cols-4 ms-auto mt-2 mb-2">
                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2 " asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@cancelado.IDBroker"
                                                   data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye "></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <div class="d-flex flex-column col">
                                                        <div class="" mb-4 ms-3">
                                                            <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@cancelado.Correo')">
                                                                <i class="fa-solid fa-key"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                }

                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" onclick="validateDataDelate(@cancelado.IDBroker, 'Broker')"
                                                   data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            }

                        </div>

                        <footer class="d-flex row justify-content-center">
                            <nav id="paginacionCanceladoscard" aria-label="" class="mt-4  d-flex justify-content-center ">

                            </nav>
                        </footer>

                    </div>
                </div>

                <div id="Tablaproceso" class="tabcontent5 bg-light mt-3">
                    <div class="table-wrapper-scroll-y my-custom-scrollbar table-responsive mt-2 bg-light rounded">
                        <table class="table table-hover ">
                            <thead class="backgr-gray-head">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Asociado</th>
                                    <th scope="col" class="text-center">Teléfono</th>
                                    <th scope="col" class="text-center">Correo</th>

                                    <th scope="col">Estatus</th>
                                    <th scope="col">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>

                                <!--Back-End team: cuando hagan el ciclo por favor tomen en cuenta solamente la primmera columna de la tabla
                                    ya que hay se encuentran todos los cambios que he hecho  ---   --->
                                @foreach (var cancelado in Model.BrokersCL)
                                {
                                    <tr id="BrokersTabla_@cancelado.IDBroker" class=" table Cancelados tabla-hover">
                                        <th scope="row">@cancelado.BrokerID</th>
                                        <td> @cancelado.Nombre @cancelado.ApellidoP @cancelado.ApellidoM </td>
                                        <td> @cancelado.NAsociado</td>
                                        <td class="text-center">@cancelado.Telefono</td>
                                        <td class="text-center">@cancelado.Correo</td>

                                        <td class="text-center">
                                            <!--esto hay que conectarlo solamente es de prueba-->
                                            <p class="bg-status-cancelado  etiquetadoTabla   text-white">Cancelado</p>
                                        </td>

                                        <td>
                                            <div class=" d-flex justify-content-evenly ">
                                                <a asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@cancelado.IDBroker" class="style-vermas2" data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye"></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@cancelado.Correo')">
                                                        <i class="fa-solid fa-key"></i>
                                                    </a>
                                                }

                                                <a class="style-vermas2" onclick="validateDataDelate(@cancelado.IDBroker, 'Broker')" data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can "></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <footer class="d-flex row justify-content-center">
                        <nav id="paginacionCanceladostable" aria-label="" class="mt-4 d-flex justify-content-center">

                        </nav>
                    </footer>
                </div>

            </div>
        </div>
    </div>

    <!--tabla para bloqueados-->
    <div class="px-0  tabcontent2 mb-3" id="Tabla6">
        <div class="container-fluid px-0 mx-auto row">
            <div class="col">
                <!--Botones de visualización para ver las tarjetas o la tabla-->
                <div class="tab  rounded mb-1">
                    <button id="card" class="changeFormat tarjetaProcesoDefault tablinks3  " onclick="vercontenedor(event, 'Tabla4')" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tarjeta">
                        <svg class="size-icons-table" fill="none" stroke="currentColor"
                             viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2">
                            </path>
                        </svg>
                    </button>
                    <button id="table" class="changeFormat tablinks3 " onclick="vercontenedor(event, 'Tabla5')" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            title="Vista tabla">
                        <i class="fa-solid fa-table mt-1" style="font-size:20px; color: rgb(71, 71, 71);"></i>
                    </button>
                </div>

                <div id="Tabla4" class="tabcontent3 ">
                    <div class="container-fluid  row px-0">

                        <div class="row row-cols-xxl-4  row-cols-lg-3 row-cols-md-2 row-cols-sm-1 responsiveExtraSmall" style=" margin: 0px 11px;">


                            @foreach (var bloqueado in Model.BrokersBL)
                            {
                                <div id="Brokers_@bloqueado.IDBroker" class="card Bloqueados mt-2 col mb-2 ">

                                    <div class="cardBroker h-auto mx-auto mb-2  fw-bold p-1">

                                        <div class="card-center-1  d-flex justify-content-end">


                                            <div class="etiquetadoBrokers  bg-status-bloqueado  size-letter-card-t">
                                                <p class="txtEtiquetado mx-3 ">Bloqueado</p>
                                            </div>

                                        </div>

                                        <div class=" col-12  d-flex mt-1  mx-auto color-letter-cards align-items-center row row-cols-1">
                                            <!--fila de la informacon prinipal de la tarjeta-->
                                            <div class="card-mainInfo row d-inline-flex mx-auto">

                                                <div class="col-3">


                                                    @{

                                                        bool userExists = Model.BrokerImgBL.Exists(u => u.IDBrokerImg == bloqueado.IDBroker);

                                                        if (userExists)
                                                        {
                                                            foreach (var imgB in Model.BrokerImgBL)
                                                            {
                                                                if (imgB.IDBrokerImg == bloqueado.IDBroker && @imgB.txtBase64 != null)
                                                                {
                                                                    <img src="@imgB.txtBase64" alt="" class="img-size-t d-flex mx-auto ">
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            <img src="~/img/Imagenes-tab-brockers/profile.png" alt="" class="img-size-t d-flex mx-auto ">

                                                        }




                                                    }

                                                </div>
                                                <div class="col-9 text-cards ">
                                                    <div class="ms-3  color-icons-cards">
                                                        <h6 class=" text-orange NombreBrokerCard  longitudDePruebaBroker">
                                                            <i class="fa-solid fa-user me-2"></i>

                                                            @bloqueado.Nombre @bloqueado.ApellidoP
                                                        </h6>
                                                        <h6 class="subTextBrokerCard  ">
                                                            <i class="fa-solid fa-phone me-2"></i>@bloqueado.Telefono
                                                        </h6>
                                                        <h6 class="subTextBrokerCard longitudDePruebaBroker">
                                                            <i class="fa-solid fa-envelope me-2"></i>@bloqueado.Correo
                                                        </h6>

                                                    </div>
                                                </div>
                                            </div>
                                            <!--fila de los iconos-->
                                            <div class="row d-flex justify-content-end col-7 row row-cols-4 ms-auto mt-2 mb-2">
                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2 " asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@bloqueado.IDBroker"
                                                   data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye "></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <div class="d-flex flex-column col">
                                                        <div class="" mb-4 ms-3">
                                                            <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@bloqueado.Correo')">
                                                                <i class="fa-solid fa-key"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                }

                                                <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" onclick="validateDataDelate(@bloqueado.IDBroker, 'Broker')"
                                                   data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            }


                        </div>

                        <footer class="d-flex row justify-content-center">
                            <nav id="paginacionBloqueadoscard" aria-label="" class="mt-4  d-flex justify-content-center ">

                            </nav>
                        </footer>

                    </div>
                </div>

                <div id="Tabla5" class="tabcontent3 mt-3 bg-light">

                    <div class="table-wrapper-scroll-y my-custom-scrollbar table-responsive mt-2 bg-light rounded">
                        <table class="table table-hover ">
                            <thead class="backgr-gray-head">
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nombre</th>
                                    <th scope="col">Asociado</th>
                                    <th scope="col" class="text-center">Teléfono</th>
                                    <th scope="col" class="text-center">Correo</th>

                                    <th scope="col">Estatus</th>
                                    <th scope="col">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>

                                <!--Back-End team: cuando hagan el ciclo por favor tomen en cuenta solamente la primmera columna de la tabla
                                    ya que hay se encuentran todos los cambios que he hecho-->
                                @foreach (var bloqueado in Model.BrokersBL)
                                {
                                    <tr id="Broker_@bloqueado.IDBroker" class="table Bloqueados tabla-hover">
                                        <th scope="row">@bloqueado.BrokerID</th>
                                        <td> @bloqueado.Nombre @bloqueado.ApellidoP @bloqueado.ApellidoM </td>
                                        <td> @bloqueado.NAsociado  </td>
                                        <td class="text-center">@bloqueado.Telefono</td>
                                        <td class="text-center">@bloqueado.Correo</td>

                                        <td class="text-center">
                                            <!--esto hay que conectarlo solamente es de prueba-->
                                            <p class="bg-status-bloqueado  etiquetadoTabla   text-white">Bloqueado</p>
                                        </td>

                                        <td>
                                            <div class=" d-flex justify-content-evenly ">
                                                <a asp-controller="Brokers" asp-action="EdicionBroker" asp-route-IDBroker="@bloqueado.IDBroker" class="style-vermas2" data-toggle="tooltip" data-placement="top" title="Ver detalles">
                                                    <i class="fa-sharp fa-solid fa-eye"></i>
                                                </a>

                                                @if (SignInManager.IsSignedIn(User) && (User.IsInRole("Admin root") || (User.IsInRole("Mesa de control")) || (User.IsInRole("Contact Center"))))
                                                {
                                                    <a class="size-letter-card-t border-0 bg-transparent d-flex style-vermas2" data-toggle="modal" data-target="#RecuContra" data-placement="top" title="Cambiar contraseña" onclick="setEmail('@bloqueado.Correo')">
                                                        <i class="fa-solid fa-key"></i>
                                                    </a>
                                                }

                                                <a class="style-vermas2" onclick="validateDataDelate(@bloqueado.IDBroker, 'Broker')" data-toggle="tooltip" data-placement="top" title="Eliminar">
                                                    <i class="fa-solid fa-trash-can "></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>

                    </div>

                    <footer class="d-flex row justify-content-center">
                        <nav id="paginacionBloqueadostable" aria-label="" class="mt-4  d-flex justify-content-center ">
                        </nav>
                    </footer>

                </div>


            </div>
        </div>
    </div>

</div>

<!-- MODAL PARA RECUPERACION DE CONTRASEÑA -->
<div class="modal fade " id="RecuContra" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="background-color: rgba(128,128,128,0.5); height: 122%;">
    <div class="modal-dialog">
        <div class="modal-content">
            <form asp-controller="Usuarios" asp-action="ResetPassword" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title fs-5" id="exampleModalLabel">Recuperar de contraseña</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="border:none;">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body px-4 ">

                    <input type="hidden" name="idUsuarioP" />
                    <input type="hidden" name="emailUser" id="eU" value="" autocomplete="off" />

                    <!--new agregado por Thaliz -->
                    <p class="text-danger msnContraseña" style="text-align:justify">La contraseña debe tener al menos 8 caracteres, un valor alfanumérico, un caracter especial y al menos 1 caracter en mayúsculas.</p>


                    <div class="form-group is-empty">
                        <div class="d-inline form-group label-floating is-empty ms-3">
                            <div class="d-flex">
                                <label for="modalResetPassword" class="color_letter2 fs-6">Nueva contraseña</label>
                            </div>
                            <input type="password" id="modalResetPassword" class="mt-2 form-control inputContraseñaModal" style="width:85%;">
                            <span class="password-toggle1" onclick="togglePasswordVisibility1()"><i class="far fa-eye"></i></span>
                        </div>
                    </div>

                    <div class="form-group is-empty">
                        <div class="d-inline form-group label-floating is-empty ms-3">
                            <div class="d-flex">
                                <label for="modalconfirmPassword" class="color_letter2 fs-6">Confirma la contraseña</label>
                            </div>
                            <input type="password" id="modalconfirmPassword" class="mt-2 form-control inputContraseñaModal" style="width:85%;">
                            <span class="password-toggle2" onclick="togglePasswordVisibility2()"><i class="far fa-eye"></i></span>
                        </div>
                    </div>

                    <!--hasta aqui lo nuevo agregado por Thaliz-->
                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-dark-blue text-white" id="btnEnviarContraseña" data-bs-dismiss="modal" style="text-transform:inherit;">Guardar cambios</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    var userEmail;
    function setEmail(email) {

        console.log(email);
        userEmail = email;
    }
</script>

<!--script para comprobar que la contraseña de confirmacion sea igual a la contraseña nueva :)*******************************************************-->
<script>
    document.getElementById('btnEnviarContraseña').addEventListener('click', function () {
        var password = document.getElementById('modalResetPassword').value;
        var confirmPassword = document.getElementById('modalconfirmPassword').value;

        console.log(confirmPassword);
        if (password !== confirmPassword) {
            // Si las contraseñas no coinciden, muestra una alerta
            alert("Las contraseñas no coinciden. Por favor, asegúrate de ingresar la misma contraseña en ambos campos.");
        } else {

            var user = $('#eU').val();
            var mensajeError = document.getElementsByClassName("msnContraseña")[0];
            mensajeError.textContent = "";

            if (password.length < 8) {
                mensajeError.textContent = "La contraseña debe tener al menos 8 caracteres, un valor alfanumérico y al menos 1 caracter en mayúsculas.";

            } else {

                var newPassword = confirmPassword;

                $.ajax({
                    type: 'POST',
                    url: '/Usuarios/ResetPassword',
                    data: {
                        emailUser: userEmail,
                        newPassword: password
                    },
                    success: function (result) {
                        Swal.fire({
                            title: '¡Registro exitoso!',
                            html: 'La contraseña se actualizó correctamente.',
                            icon: 'success',
                            confirmButtonText: "Ok",
                            customClass: {
                                confirmButton: 'button_confirmacion'
                            }
                        }).then(function () {
                            location.reload();
                        });
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        // Manejar el resultado no exitoso aquí
                        console.log('Error:', textStatus);
                        console.log('Error lanzado:', errorThrown);
                    }
                });
            }
        }
    });
</script>

<script>



    //Para bloquear el boton de la tabla de excel
    const botonBloqueado = document.getElementById('tablaExcel');


    // Escuchar el evento 'submit' del formulario
    document.getElementById("excelTabla").addEventListener("submit", function () {
        // Deshabilitar el botón antes de enviar el formulario
        botonBloqueado.disabled = true;

        setTimeout(() => {
            // Habilita el botón de envío después de que el envío haya terminado
            if (botonBloqueado) {
                botonBloqueado.disabled = false;
            }
        }, 6000);
    });
</script>

<!--Scripts SECTION////////////////////////////////////////////////////////////////////////////////////////////////////-->
<!--SCRIPTS-->
<script src="/js/PropiedadesTab.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>


<script src="~/js/script-step.js"></script>
<script src="~/js/script.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>




<!--   Core JS Files   -->
@* <script src="~/assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="~/assets/js/jquery.bootstrap.js" type="text/javascript"></script> *@
<!--  Plugin for the Wizard -->
@* <script src="~/assets/js/material-bootstrap-wizard.js"></script> *@

<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
<script src="~/assets/js/jquery.validate.min.js"></script>

<script src="~/js/usuariosScript.js"></script>

<script src="~/js/FiltrosImprovisado.js"></script>


<script>

    $(function () {
        var successMessageNU = '@TempData["SuccessMessageNU"]';
        var failedMessageNU = '@TempData["FailedMessageNU"]';
        if (successMessageNU) {
            Swal.fire({
                title: '¡Registro exitoso!',
                html: successMessageNU,
                icon: 'success',
                confirmButtonText: "Ok",
                customClass: {
                    confirmButton: 'button_confirmacion'
                }
            });
        } else if (failedMessageNU) {
            Swal.fire({
                icon: 'error',
                title: 'Registro fallido',
                html: failedMessageNU,
                confirmButtonText: "Ok",
                customClass: {
                    confirmButton: 'button_confirmacion'
                }
            });
        }
    });

    document.querySelector(".Inactivos").click();



</script>


<script>
    function togglePasswordVisibility1() {
        var passwordInput = document.getElementById("modalResetPassword");
        var passwordToggle = document.querySelector(".password-toggle1");
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            passwordToggle.innerHTML = '<i class="far fa-eye-slash"></i>'; // Cambia el icono a un ojo tachado
        } else {
            passwordInput.type = "password";
            passwordToggle.innerHTML = '<i class="far fa-eye"></i>'; // Cambia el icono a un ojo
        }
    }
    function togglePasswordVisibility2() {
        var passwordInput = document.getElementById("modalconfirmPassword");
        var passwordToggle = document.querySelector(".password-toggle2");
        if (passwordInput.type === "password") {
            passwordInput.type = "text";
            passwordToggle.innerHTML = '<i class="far fa-eye-slash"></i>'; // Cambia el icono a un ojo tachado
        } else {
            passwordInput.type = "password";
            passwordToggle.innerHTML = '<i class="far fa-eye"></i>'; // Cambia el icono a un ojo
        }
    }
</script>